{% extends 'payroll/admin/payroll_admin_base.html' %}
{% block title %}Admin-Employees List{% endblock %}
{% block content %}
<main class="content-wrap">
  <header class="content-head">
    <h1><b>{{ department.name }} Department Employees</b></h1>
  </header>

  <div class="table-container">
    <div class="input-field" style="display: flex; gap: 10px;">
      <button 
        class="btn btn-primary" 
        style="background-color: #0d6efd; color: white; border: none; padding: 8px 12px; border-radius: 6px; text-decoration: none; display: flex; align-items: center;" 
        onclick="redirectPayroll('regular')">
        <span class="material-symbols-outlined">cycle</span>
        Regular Payroll
      </button>

      <button 
        class="btn btn-primary" 
        style="background-color: #0d6efd; color: white; border: none; padding: 8px 12px; border-radius: 6px; text-decoration: none; display: flex; align-items: center;" 
        onclick="redirectPayroll('casual')">
        <span class="material-symbols-outlined">cycle</span>
        Casual Payroll
      </button>
      
      <button 
        class="btn btn-primary" 
        style="background-color: #0d6efd; color: white; border: none; padding: 8px 12px; border-radius: 6px; text-decoration: none; display: flex; align-items: center;" 
        onclick="redirectPayroll('part-time')">
        <span class="material-symbols-outlined">cycle</span>
        Part-Time Payroll
      </button>
    </div>

    <h2>Employee List</h2>
    <table>
      <thead>
        <tr>
          <th>Employee Name</th>
          <th>Position</th>
          <th>Employment Type</th>
        </tr>
      </thead>
      <tbody>
        {% if employees %}
          {% for emp in employees %}
          <tr data-employment-type="{{ emp.employment_type.name|lower }}">
            <td data-label="Name">{{ emp.first_name }} {{ emp.last_name }}</td>
            <td data-label="Position">{{ emp.position | replace("<", "") | replace(">", "") }}</td>
            <td data-label="Employment Type">{{ emp.employment_type.name }}</td>
          </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="3" style="text-align:center; color:#666; padding:20px;">
              No employees found in this department.
            </td>
          </tr>
        {% endif %}
      </tbody>
    </table>
  </div>
</main>

<script>
function redirectPayroll(type) {
    const departmentId = {{ department.id }};
    let url = '';
    
    if (type === 'regular') {
        url = `{{ url_for('payroll_admin.regular_payroll') }}?department_id=${departmentId}`;
    } else if (type === 'casual') {
        url = `{{ url_for('payroll_admin.casual_payroll') }}?department_id=${departmentId}`;
    } else if (type === 'part-time') {
        url = `{{ url_for('payroll_admin.parttime_payroll') }}?department_id=${departmentId}`;
    }

    window.location.href = url;
}
</script>
{% endblock %}

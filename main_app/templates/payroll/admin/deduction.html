{% extends 'payroll/admin/payroll_admin_base.html' %}
{% block title %}Deduction Formulas{% endblock %}

{% block content %}
<main class="p-6 bg-gray-900 min-h-screen text-gray-100">

  <header class="mb-6">
    <h1 class="text-3xl font-bold text-green-400">Deduction Formulas</h1>
    <p class="text-gray-300 mt-1">Showing computations for salary: <strong>₱{{ salary | round(2) }}</strong></p>
  </header>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

    <!-- PhilHealth -->
    <div class="bg-gray-800 rounded-lg p-5 shadow-md">
      <h2 class="text-xl font-semibold text-green-400 mb-3">PhilHealth</h2>
      <p><span class="font-semibold">Formula:</span> 5% of salary (split 50/50). Floor: ₱10,000, Ceiling: ₱100,000</p>
      <p><span class="font-semibold">Employee Share:</span> ₱{{ philhealth.employee_share | round(2) }}</p>
      <p><span class="font-semibold">Employer Share:</span> ₱{{ philhealth.employer_share | round(2) }}</p>
      <p><span class="font-semibold">Total:</span> ₱{{ philhealth.total_premium | round(2) }}</p>
    </div>

    <!-- Pag-IBIG -->
    <div class="bg-gray-800 rounded-lg p-5 shadow-md">
      <h2 class="text-xl font-semibold text-green-400 mb-3">Pag-IBIG</h2>
      <p><span class="font-semibold">Formula:</span> ₱100 if salary ≤ 1,500, else 2% of salary (split 50/50). Max ₱5,000 considered</p>
      <p><span class="font-semibold">Employee Share:</span> ₱{{ pagibig.employee_share | round(2) }}</p>
      <p><span class="font-semibold">Employer Share:</span> ₱{{ pagibig.employer_share | round(2) }}</p>
      <p><span class="font-semibold">Total:</span> ₱{{ pagibig.total_contribution | round(2) }}</p>
    </div>

    <!-- SSS -->
    <div class="bg-gray-800 rounded-lg p-5 shadow-md">
      <h2 class="text-xl font-semibold text-green-400 mb-3">SSS</h2>
      <p><span class="font-semibold">Formula:</span> Employee: 4%, Employer: 8.5% of salary. Max salary ₱25,000</p>
      <p><span class="font-semibold">Employee Share:</span> ₱{{ sss.employee_share | round(2) }}</p>
      <p><span class="font-semibold">Employer Share:</span> ₱{{ sss.employer_share | round(2) }}</p>
      <p><span class="font-semibold">Total:</span> ₱{{ sss.total | round(2) }}</p>
    </div>

    <!-- GSIS -->
    <div class="bg-gray-800 rounded-lg p-5 shadow-md">
      <h2 class="text-xl font-semibold text-green-400 mb-3">GSIS</h2>
      <p><span class="font-semibold">Formula:</span> Employee: 9%, Employer: 12% of salary</p>
      <p><span class="font-semibold">Employee Share:</span> ₱{{ gsis.employee_share | round(2) }}</p>
      <p><span class="font-semibold">Employer Share:</span> ₱{{ gsis.employer_share | round(2) }}</p>
      <p><span class="font-semibold">Total:</span> ₱{{ gsis.total | round(2) }}</p>
    </div>

    <!-- MENPC / Coop -->
    <div class="bg-gray-800 rounded-lg p-5 shadow-md">
      <h2 class="text-xl font-semibold text-green-400 mb-3">MENPC / Coop</h2>
      <p><span class="font-semibold">Formula:</span> 1% of salary</p>
      <p><span class="font-semibold">Employee Share:</span> ₱{{ menpc.employee_share | round(2) }}</p>
      <p><span class="font-semibold">Total:</span> ₱{{ menpc.total | round(2) }}</p>
    </div>

    <!-- Pag-IBIG Loans -->
    <div class="bg-gray-800 rounded-lg p-5 shadow-md">
      <h2 class="text-xl font-semibold text-green-400 mb-3">Pag-IBIG Loans</h2>
      <ul class="list-disc list-inside space-y-1">
        <li>Short-Term: ₱{{ loans.ShortTerm | round(2) }} (2% of salary)</li>
        <li>Calamity: ₱{{ loans.Calamity | round(2) }} (1% of salary)</li>
        <li>Emergency: ₱{{ loans.Emergency | round(2) }} (1.5% of salary)</li>
      </ul>
    </div>

    <!-- Withholding Tax -->
    <div class="bg-gray-800 rounded-lg p-5 shadow-md col-span-1 md:col-span-2">
      <h2 class="text-xl font-semibold text-green-400 mb-3">Withholding Tax</h2>
      <p><span class="font-semibold">Formula:</span> {{ withholding.formula }}</p>
      <p><span class="font-semibold">Tax Amount:</span> ₱{{ withholding.tax | round(2) }}</p>
    </div>

  </div>
</main>
{% endblock %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Department Head | GovHRPay{% endblock %}</title>

    <link
      rel="icon"
      type="image/png"
      href="{{ url_for('static', filename='img/logo2.avif') }}"
    />

    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome CDN (Option 1) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
  </head>

  <body class="bg-gray-900 text-gray-100 flex flex-col md:flex-row min-h-screen">

    <!-- Mobile Navbar -->
    <header class="md:hidden bg-blue-800 text-white flex justify-between items-center p-4 shadow-md sticky top-0 z-20">
      <div class="flex items-center gap-2">
        <button id="mobileMenuBtn" class="text-white focus:outline-none">
          <i class="fas fa-bars text-3xl"></i>
        </button>
        <h1 class="font-semibold text-lg">GovHRPay</h1>
      </div>
      <button id="logoutBtnMobile" class="text-white">
        <i class="fas fa-right-from-bracket text-2xl"></i>
      </button>
    </header>

    <!-- Sidebar -->
    <aside
      id="sidebar"
      class="bg-gray-950 text-white w-64 sm:w-72 flex-shrink-0 fixed md:static inset-y-0 left-0 transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-30 flex flex-col justify-between border-r border-gray-800 shadow-xl"
    >
      <div class="overflow-y-auto flex-grow">

        <!-- Logo -->
        <div class="flex items-center gap-3 px-6 py-5 border-b border-gray-800 sticky top-0 bg-gray-950 z-10">
          <img
            src="{{ url_for('static', filename='img/logo2.avif') }}"
            class="w-12 h-12 rounded-full object-cover"
          />
          <div>
            <h2 class="text-lg font-semibold text-blue-400">GovHRPay</h2>
            <p class="text-sm text-gray-400">Dept. Head Panel</p>
            <p class="text-sm text-gray-300 mt-1">
              Welcome! <span class="font-medium">{{ current_user.get_full_name() }}</span>
            </p>
          </div>
        </div>

        <!-- Sidebar Navigation -->
        <nav class="mt-4 px-4 text-gray-300">

          <!-- Group: Employee & User Management -->
          <div class="mb-6">
            <h3 class="text-sm uppercase tracking-wider text-gray-500 mb-2">Dashboard & Employee Management</h3>
            <ul class="space-y-2">
              <li>
                <a href="{{ url_for('dept_head.dashboard') }}" class="flex items-center gap-3 p-2 rounded-lg hover:bg-blue-700/40 transition">
                  <i class="fas fa-tachometer-alt text-blue-400"></i>
                  Dashboard
                </a>
              </li>

              <li>
                <a href="{{ url_for('dept_head.employees') }}" class="flex items-center gap-3 p-2 rounded-lg hover:bg-blue-700/40 transition">
                  <i class="fas fa-users text-blue-400"></i>
                  Employees Record
                </a>
              </li>
            </ul>
          </div>

          <!-- Group: Attendance -->
          <div class="mb-6">
            <h3 class="text-sm uppercase tracking-wider text-gray-500 mb-2">Attendance</h3>
            <ul class="space-y-2">
              <li>
                <a href="{{ url_for('dept_head.attendance') }}" class="flex items-center gap-3 p-2 rounded-lg hover:bg-blue-700/40 transition">
                  <i class="fas fa-calendar-check text-blue-400"></i>
                  Attendance Records
                </a>
              </li>
            </ul>
          </div>

          <!-- Group: Leave Management -->
          <div class="mb-6">
            <h3 class="text-sm uppercase tracking-wider text-gray-500 mb-2">Leave Management</h3>
            <ul class="space-y-2">
              <li>
                <a href="{{ url_for('dept_head.leaves') }}" class="flex items-center gap-3 p-2 rounded-lg hover:bg-blue-700/40 transition">
                  <i class="fas fa-calendar-alt text-blue-400"></i>
                  Review Leaves
                </a>
              </li>
            </ul>
          </div>

          <!-- Group: Profile -->
          <div class="mb-6">
            <h3 class="text-sm uppercase tracking-wider text-gray-500 mb-2">Profile Settings</h3>
            <ul class="space-y-2">
              <li>
                <a href="{{ url_for('dept_head.edit_password') }}" class="flex items-center gap-3 p-2 rounded-lg hover:bg-blue-700/40 transition">
                  <i class="fas fa-cog text-blue-400"></i>
                  Profile Settings
                </a>
              </li>
            </ul>
          </div>

        </nav>
      </div>

      <!-- Logout -->
      <div class="p-4 border-t border-gray-800">
        <button id="logoutBtn" class="flex items-center gap-2 w-full justify-center py-2 rounded-lg bg-blue-600 hover:bg-blue-700 transition">
          <i class="fas fa-right-from-bracket"></i> Logout
        </button>
      </div>
    </aside>

    <!-- Overlay (Mobile) -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden md:hidden"></div>

    <!-- Main Content -->
    <main class="flex-1 p-4 sm:p-6 md:p-8 overflow-y-auto bg-gray-900">
      <div class="bg-blue-800 text-white rounded-lg p-4 mb-6 flex flex-wrap gap-3 items-center justify-between shadow-md sticky top-0 z-10 hidden md:flex">
        <div class="flex items-center gap-3">
          <i class="fas fa-building text-xl"></i>
          <h1 class="text-lg font-semibold">Department Head Panel</h1>
        </div>
      </div>

      {% block content %}{% endblock %}
    </main>

    <!-- SweetAlert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");
      const mobileMenuBtn = document.getElementById("mobileMenuBtn");

      mobileMenuBtn?.addEventListener("click", () => {
        sidebar.classList.toggle("-translate-x-full");
        overlay.classList.toggle("hidden");
      });

      overlay?.addEventListener("click", () => {
        sidebar.classList.add("-translate-x-full");
        overlay.classList.add("hidden");
      });

      document.getElementById("logoutBtn")?.addEventListener("click", confirmLogout);
      document.getElementById("logoutBtnMobile")?.addEventListener("click", confirmLogout);

      function confirmLogout(e) {
        e.preventDefault();
        Swal.fire({
          title: "Are you sure?",
          text: "You will be logged out.",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#3085d6",
          cancelButtonColor: "#d33",
          confirmButtonText: "Yes, logout!"
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = "{{ url_for('hr_auth.logout') }}";
          }
        });
      }
    </script>

  </body>
</html>
